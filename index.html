<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Love Rummy Rendezvous</title>
    <meta name="description" content="Play Rummy with Love - Multiplayer Card Game">
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>


    <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyC1D45vfziD-wqIrDGANAY7GzR0L94BqB8",
      authDomain: "rummy-multiplayer-fe391.firebaseapp.com",
      databaseURL: "https://rummy-multiplayer-fe391-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "rummy-multiplayer-fe391",
      storageBucket: "rummy-multiplayer-fe391.firebasestorage.app",
      messagingSenderId: "717212591323",
      appId: "1:717212591323:web:7cb38b16733f7a9b5498fe"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
  </script>

  
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        rose: {
                            50: '#fff1f2',
                            100: '#ffe4e6',
                            200: '#fecdd3',
                            300: '#fda4af',
                            400: '#fb7185',
                            500: '#f43f5e',
                            600: '#e11d48',
                            700: '#be123c',
                            800: '#9f1239',
                            900: '#881337',
                        },
                        pink: {
                            50: '#fdf2f8',
                            100: '#fce7f3',
                            200: '#fbcfe8',
                            300: '#f9a8d4',
                            400: '#f472b6',
                            500: '#ec4899',
                            600: '#db2777',
                            700: '#be185d',
                            800: '#9d174d',
                            900: '#831843',
                        }
                    },
                    keyframes: {
                        'heartbeat': {
                            '0%, 100%': { transform: 'scale(1)' },
                            '50%': { transform: 'scale(1.1)' }
                        },
                        'fade-in': {
                            '0%': { opacity: '0', transform: 'translateY(20px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' }
                        },
                        'slide-in': {
                            '0%': { transform: 'translateX(-100%)', opacity: '0' },
                            '100%': { transform: 'translateX(0)', opacity: '1' }
                        }
                    },
                    animation: {
                        'heartbeat': 'heartbeat 2s ease-in-out infinite',
                        'fade-in': 'fade-in 0.6s ease-out',
                        'slide-in': 'slide-in 0.5s ease-out'
                    }
                }
            }
        }
    </script>
    <style>
        .love-gradient {
            background: linear-gradient(to right, #f472b6, #fb7185, #f472b6);
        }
        .card-shadow {
            box-shadow: 0 4px 20px rgba(251, 113, 133, 0.15);
        }
        .game-table {
            background: linear-gradient(135deg, #fdf2f8 0%, #fce7f3 50%, #fbcfe8 100%);
            border: 2px solid rgba(251, 113, 133, 0.2);
        }
        body {
            background: linear-gradient(to bottom right, #fdf2f8, #fce7f3, #fbcfe8);
            min-height: 100vh;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useContext, createContext, useRef } = React;
        const { Heart, Diamond, Club, Spade, Users, Play, ArrowLeft, Crown, User, Copy, Send, X, MessageCircle, MessageSquare, Shuffle, RotateCcw } = lucide;

        // Game Context
        const GameContext = createContext();

        const GameProvider = ({ children }) => {
            const [players, setPlayers] = useState([]);
            const [currentPlayer, setCurrentPlayerState] = useState(null);
            const [chatMessages, setChatMessages] = useState([]);
            const [isGameStarted, setIsGameStarted] = useState(false);
            const [currentTurn, setCurrentTurnState] = useState("");
            const [deck, setDeck] = useState([]);
            const [discardPile, setDiscardPile] = useState([]);

            const addPlayer = (player) => {
                const newPlayer = { ...player, cards: [] };
                setPlayers(prev => [...prev, newPlayer]);
            };

            const removePlayer = (playerId) => {
                setPlayers(prev => prev.filter(p => p.id !== playerId));
            };

            const setCurrentPlayer = (player) => {
                setCurrentPlayerState(player);
            };

            const addChatMessage = (message) => {
                const newMessage = {
                    ...message,
                    id: Date.now().toString(),
                    timestamp: new Date()
                };
                setChatMessages(prev => [...prev, newMessage]);
            };

            const generateDeck = () => {
                const suits = ['hearts', 'diamonds', 'clubs', 'spades'];
                const ranks = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K'];
                const newDeck = [];

                suits.forEach(suit => {
                    ranks.forEach((rank, index) => {
                        newDeck.push({
                            id: `${suit}-${rank}`,
                            suit,
                            rank,
                            value: index + 1
                        });
                    });
                });

                // Shuffle deck
                for (let i = newDeck.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [newDeck[i], newDeck[j]] = [newDeck[j], newDeck[i]];
                }

                return newDeck;
            };

            const startGame = () => {
                const newDeck = generateDeck();
                const updatedPlayers = [...players];
                
                // Deal 7 cards to each player
                let cardIndex = 0;
                updatedPlayers.forEach(player => {
                    player.cards = newDeck.slice(cardIndex, cardIndex + 7);
                    cardIndex += 7;
                });

                setPlayers(updatedPlayers);
                setDeck(newDeck.slice(cardIndex + 1));
                setDiscardPile([newDeck[cardIndex]]);
                setIsGameStarted(true);
                setCurrentTurnState(players[0]?.id || "");
            };

            const setCurrentTurn = (playerId) => {
                setCurrentTurnState(playerId);
            };

            return (
                <GameContext.Provider value={{
                    players,
                    currentPlayer,
                    chatMessages,
                    isGameStarted,
                    currentTurn,
                    deck,
                    discardPile,
                    addPlayer,
                    removePlayer,
                    setCurrentPlayer,
                    addChatMessage,
                    startGame,
                    setCurrentTurn
                }}>
                    {children}
                </GameContext.Provider>
            );
        };

        const useGame = () => {
            const context = useContext(GameContext);
            if (!context) {
                throw new Error('useGame must be used within a GameProvider');
            }
            return context;
        };

        // Toast notifications
        const showToast = (message, type = 'success') => {
            const toast = document.createElement('div');
            toast.className = `fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg transition-all duration-300 ${
                type === 'success' ? 'bg-green-500 text-white' : 'bg-red-500 text-white'
            }`;
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.remove();
            }, 3000);
        };

        // Playing Card Component
        const PlayingCard = ({ card, isSelected = false, onClick, className = "" }) => {
            const getSuitIcon = (suit) => {
                const iconProps = { size: 16, fill: "currentColor" };
                switch (suit) {
                    case 'hearts': return React.createElement(Heart, iconProps);
                    case 'diamonds': return React.createElement(Diamond, iconProps);
                    case 'clubs': return React.createElement(Club, iconProps);
                    case 'spades': return React.createElement(Spade, iconProps);
                    default: return React.createElement(Heart, iconProps);
                }
            };

            const getSuitColor = (suit) => {
                return suit === 'hearts' || suit === 'diamonds' ? 'text-red-500' : 'text-gray-800';
            };

            return (
                <div
                    onClick={onClick}
                    className={`w-20 h-28 bg-white rounded-lg border-2 shadow-md cursor-pointer transition-all duration-300 hover:shadow-lg hover:-translate-y-1 flex flex-col justify-between p-2 select-none ${
                        isSelected ? "border-rose-400 bg-rose-50 transform -translate-y-2 shadow-xl" : "border-gray-300"
                    } ${className}`}
                >
                    <div className={`flex flex-col items-center ${getSuitColor(card.suit)}`}>
                        <span className="text-sm font-bold">{card.rank}</span>
                        {getSuitIcon(card.suit)}
                    </div>
                    <div className={`flex justify-center items-center ${getSuitColor(card.suit)}`}>
                        <div className="scale-150">
                            {getSuitIcon(card.suit)}
                        </div>
                    </div>
                    <div className={`flex flex-col items-center rotate-180 ${getSuitColor(card.suit)}`}>
                        <span className="text-sm font-bold">{card.rank}</span>
                        {getSuitIcon(card.suit)}
                    </div>
                </div>
            );
        };

        // Player Hand Component
        const PlayerHand = ({ cards, selectedCards, onCardSelect }) => {
            return (
                <div className="flex flex-wrap gap-2 justify-center">
                    {cards.map((card, index) => (
                        <div 
                            key={card.id} 
                            className="transition-all duration-300"
                            style={{ zIndex: cards.length - index }}
                        >
                            <PlayingCard
                                card={card}
                                isSelected={selectedCards.includes(card.id)}
                                onClick={() => onCardSelect(card.id)}
                                className="hover:z-50"
                            />
                        </div>
                    ))}
                </div>
            );
        };

        // Chat Panel Component
        const ChatPanel = ({ onClose }) => {
            const { chatMessages, addChatMessage, currentPlayer } = useGame();
            const [newMessage, setNewMessage] = useState("");
            const messagesEndRef = useRef(null);

            const scrollToBottom = () => {
                messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
            };

            useEffect(() => {
                scrollToBottom();
            }, [chatMessages]);

            const handleSendMessage = () => {
                if (!newMessage.trim() || !currentPlayer) return;

                addChatMessage({
                    playerId: currentPlayer.id,
                    playerName: currentPlayer.name,
                    message: newMessage
                });

                setNewMessage("");
            };

            const handleKeyPress = (e) => {
                if (e.key === 'Enter') {
                    handleSendMessage();
                }
            };

            return (
                <div className="h-96 card-shadow border-rose-200 border-2 rounded-lg bg-white flex flex-col">
                    <div className="flex-shrink-0 p-4 border-b border-rose-200">
                        <div className="flex items-center justify-between text-rose-700">
                            <div className="flex items-center gap-2">
                                <Heart size={20} fill="currentColor" />
                                <span className="font-semibold">Chat</span>
                            </div>
                            <button
                                onClick={onClose}
                                className="text-rose-500 hover:text-rose-700 hover:bg-rose-50 p-1 rounded"
                            >
                                <X size={16} />
                            </button>
                        </div>
                    </div>
                    
                    <div className="flex-1 flex flex-col p-4">
                        <div className="flex-1 overflow-y-auto space-y-3 mb-4 pr-2">
                            {chatMessages.length === 0 ? (
                                <div className="text-center text-rose-400 text-sm italic py-8">
                                    No messages yet. Say hello! 👋💕
                                </div>
                            ) : (
                                chatMessages.map((message) => (
                                    <div
                                        key={message.id}
                                        className={`flex ${
                                            message.playerId === currentPlayer?.id ? 'justify-end' : 'justify-start'
                                        }`}
                                    >
                                        <div
                                            className={`max-w-[80%] p-3 rounded-lg ${
                                                message.playerId === currentPlayer?.id
                                                    ? 'love-gradient text-white'
                                                    : 'bg-white border border-rose-200 text-rose-700'
                                            }`}
                                        >
                                            <p className="text-xs opacity-75 mb-1">{message.playerName}</p>
                                            <p className="text-sm">{message.message}</p>
                                            <p className="text-xs opacity-60 mt-1">
                                                {message.timestamp.toLocaleTimeString([], { 
                                                    hour: '2-digit', 
                                                    minute: '2-digit' 
                                                })}
                                            </p>
                                        </div>
                                    </div>
                                ))
                            )}
                            <div ref={messagesEndRef} />
                        </div>

                        <div className="flex gap-2">
                            <input
                                value={newMessage}
                                onChange={(e) => setNewMessage(e.target.value)}
                                onKeyPress={handleKeyPress}
                                placeholder="Type a lovely message..."
                                className="flex-1 border border-rose-200 focus:border-rose-400 focus:ring-rose-400 rounded px-3 py-2 text-sm"
                            />
                            <button
                                onClick={handleSendMessage}
                                disabled={!newMessage.trim()}
                                className="love-gradient hover:opacity-90 text-white px-3 py-2 rounded disabled:opacity-50"
                            >
                                <Send size={16} />
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        // Game Table Component
        const GameTable = ({ roomCode, onLeave }) => {
            const { players, currentPlayer, currentTurn, deck, discardPile } = useGame();
            const [selectedCards, setSelectedCards] = useState([]);
            const [showChat, setShowChat] = useState(false);

            const handleCardSelect = (cardId) => {
                setSelectedCards(prev => 
                    prev.includes(cardId) 
                        ? prev.filter(id => id !== cardId)
                        : [...prev, cardId]
                );
            };

            const isMyTurn = currentTurn === currentPlayer?.id;

            return (
                <div className="min-h-screen p-4">
                    <div className="max-w-7xl mx-auto">
                        {/* Header */}
                        <div className="flex justify-between items-center mb-6">
                            <div className="flex items-center gap-4">
                                <button
                                    onClick={onLeave}
                                    className="flex items-center gap-2 px-4 py-2 border border-rose-300 text-rose-600 hover:bg-rose-50 rounded-lg"
                                >
                                    <ArrowLeft size={16} />
                                    Leave Game
                                </button>
                                <div className="text-rose-700">
                                    <span className="font-semibold">Room: {roomCode}</span>
                                </div>
                            </div>
                            
                            <div className="flex items-center gap-4">
                                <div className="text-rose-700">
                                    Turn: <span className="font-semibold">
                                        {players.find(p => p.id === currentTurn)?.name || "Unknown"}
                                    </span>
                                </div>
                                <button
                                    onClick={() => setShowChat(!showChat)}
                                    className="flex items-center gap-2 px-4 py-2 love-gradient text-white rounded-lg hover:opacity-90"
                                >
                                    <MessageSquare size={16} />
                                    Chat
                                </button>
                            </div>
                        </div>

                        <div className="grid grid-cols-1 lg:grid-cols-4 gap-6">
                            {/* Game Area */}
                            <div className="lg:col-span-3 space-y-6">
                                {/* Game Table */}
                                <div className="game-table rounded-xl p-8 min-h-96">
                                    <div className="text-center mb-6">
                                        <h2 className="text-2xl font-bold text-rose-700 mb-4">Game Table</h2>
                                        
                                        {/* Deck and Discard Pile */}
                                        <div className="flex justify-center gap-8 mb-8">
                                            <div className="text-center">
                                                <div className="w-20 h-28 bg-rose-200 rounded-lg border-2 border-rose-300 flex items-center justify-center mb-2 cursor-pointer hover:bg-rose-300 transition-colors">
                                                    <div className="text-rose-600">
                                                        <Shuffle size={24} />
                                                    </div>
                                                </div>
                                                <p className="text-sm text-rose-600">Deck ({deck.length})</p>
                                            </div>
                                            
                                            <div className="text-center">
                                                {discardPile.length > 0 ? (
                                                    <PlayingCard 
                                                        card={discardPile[discardPile.length - 1]}
                                                        onClick={() => {}}
                                                    />
                                                ) : (
                                                    <div className="w-20 h-28 bg-gray-200 rounded-lg border-2 border-gray-300 flex items-center justify-center">
                                                        <span className="text-gray-400 text-xs">Empty</span>
                                                    </div>
                                                )}
                                                <p className="text-sm text-rose-600 mt-2">Discard Pile</p>
                                            </div>
                                        </div>

                                        {/* Game Actions */}
                                        <div className="flex justify-center gap-4">
                                            <button 
                                                disabled={!isMyTurn}
                                                className="px-6 py-2 love-gradient text-white rounded-lg hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed"
                                            >
                                                Draw Card
                                            </button>
                                            <button 
                                                disabled={!isMyTurn || selectedCards.length === 0}
                                                className="px-6 py-2 border-2 border-rose-400 text-rose-600 rounded-lg hover:bg-rose-50 disabled:opacity-50 disabled:cursor-not-allowed"
                                            >
                                                Discard
                                            </button>
                                            <button 
                                                disabled={!isMyTurn}
                                                className="px-6 py-2 border-2 border-green-400 text-green-600 rounded-lg hover:bg-green-50 disabled:opacity-50 disabled:cursor-not-allowed"
                                            >
                                                Meld Cards
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                {/* Player's Hand */}
                                <div className="bg-white rounded-xl p-6 card-shadow border border-rose-200">
                                    <h3 className="text-lg font-semibold text-rose-700 mb-4 text-center">Your Hand</h3>
                                    {currentPlayer?.cards ? (
                                        <PlayerHand
                                            cards={currentPlayer.cards}
                                            selectedCards={selectedCards}
                                            onCardSelect={handleCardSelect}
                                        />
                                    ) : (
                                        <div className="text-center text-rose-400 py-8">
                                            <p>Loading your cards...</p>
                                        </div>
                                    )}
                                </div>
                            </div>

                            {/* Sidebar */}
                            <div className="space-y-6">
                                {/* Players */}
                                <div className="bg-white rounded-xl p-6 card-shadow border border-rose-200">
                                    <h3 className="text-lg font-semibold text-rose-700 mb-4 flex items-center gap-2">
                                        <Users size={20} />
                                        Players
                                    </h3>
                                    <div className="space-y-3">
                                        {players.map((player) => (
                                            <div
                                                key={player.id}
                                                className={`flex items-center justify-between p-3 rounded-lg border transition-all duration-300 ${
                                                    player.id === currentTurn 
                                                        ? 'border-rose-400 bg-rose-50' 
                                                        : 'border-rose-200 bg-gradient-to-r from-pink-50 to-rose-50'
                                                }`}
                                            >
                                                <div className="flex items-center gap-3">
                                                    <div className="text-2xl">{player.avatar}</div>
                                                    <div>
                                                        <p className="font-semibold text-rose-700 flex items-center gap-2">
                                                            {player.name}
                                                            {player.isHost && <Crown size={16} className="text-yellow-500" />}
                                                        </p>
                                                        <p className="text-sm text-rose-500">
                                                            {player.cards?.length || 0} cards
                                                        </p>
                                                    </div>
                                                </div>
                                                {player.id === currentTurn && (
                                                    <div className="w-3 h-3 bg-green-400 rounded-full animate-pulse"></div>
                                                )}
                                            </div>
                                        ))}
                                    </div>
                                </div>

                                {/* Chat */}
                                {showChat && (
                                    <ChatPanel onClose={() => setShowChat(false)} />
                                )}
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // Game Lobby Component
        const GameLobby = ({ roomCode, onGameStart, onBack }) => {
            const { players, addPlayer, currentPlayer, setCurrentPlayer, startGame } = useGame();
            const [isHost, setIsHost] = useState(false);

            useEffect(() => {
                if (players.length === 0) {
                    const playerId = Date.now().toString();
                    const newPlayer = {
                        id: playerId,
                        name: "You",
                        isHost: true,
                        avatar: "🌹"
                    };
                    
                    addPlayer(newPlayer);
                    setCurrentPlayer({ ...newPlayer, cards: [] });
                    setIsHost(true);
                }
            }, []);

            const copyRoomCode = () => {
                navigator.clipboard.writeText(roomCode);
                showToast("Room code copied to clipboard! 💕");
            };

            const handleStartGame = () => {
                if (players.length < 2) {
                    showToast("Need at least 2 players to start! 💔", "error");
                    return;
                }
                startGame();
                onGameStart();
                showToast("Game starting! Good luck! 🍀");
            };

            return (
                <div className="min-h-screen p-4">
                    <div className="max-w-4xl mx-auto">
                        <div className="text-center mb-8 animate-fade-in">
                            <div className="flex justify-center mb-4">
                                <Heart size={48} className="text-rose-400 animate-heartbeat" fill="currentColor" />
                            </div>
                            <h1 className="text-3xl font-bold love-gradient bg-clip-text text-transparent mb-2">
                                Game Lobby
                            </h1>
                            <div className="flex items-center justify-center gap-4">
                                <div className="text-lg px-4 py-2 bg-rose-100 text-rose-700 border border-rose-200 rounded-lg">
                                    Room: {roomCode}
                                </div>
                                <button
                                    onClick={copyRoomCode}
                                    className="border border-rose-300 text-rose-600 hover:bg-rose-50 px-3 py-2 rounded-lg"
                                >
                                    <Copy size={16} />
                                </button>
                            </div>
                        </div>

                        <div className="grid md:grid-cols-3 gap-6">
                            <div className="md:col-span-2">
                                <div className="card-shadow border-rose-200 border-2 rounded-lg bg-white animate-slide-in">
                                    <div className="p-6 border-b border-rose-200">
                                        <h2 className="flex items-center gap-2 text-rose-700 text-xl font-semibold">
                                            <Users size={20} />
                                            Players ({players.length}/4)
                                        </h2>
                                    </div>
                                    <div className="p-6">
                                        <div className="space-y-3">
                                            {players.map((player, index) => (
                                                <div
                                                    key={player.id}
                                                    className="flex items-center justify-between p-3 bg-gradient-to-r from-pink-50 to-rose-50 rounded-lg border border-rose-200 transition-all duration-300 hover:shadow-md"
                                                >
                                                    <div className="flex items-center gap-3">
                                                        <div className="text-2xl">{player.avatar}</div>
                                                        <div>
                                                            <p className="font-semibold text-rose-700 flex items-center gap-2">
                                                                {player.name}
                                                                {player.isHost && <Crown size={16} className="text-yellow-500" />}
                                                            </p>
                                                            <p className="text-sm text-rose-500">
                                                                {player.isHost ? "Host" : "Player"}
                                                            </p>
                                                        </div>
                                                    </div>
                                                    <div className={`px-3 py-1 rounded-full text-sm ${
                                                        player.id === currentPlayer?.id 
                                                            ? "love-gradient text-white" 
                                                            : "bg-gray-200 text-gray-700"
                                                    }`}>
                                                        {player.id === currentPlayer?.id ? "You" : `Player ${index + 1}`}
                                                    </div>
                                                </div>
                                            ))}
                                            
                                            {Array.from({ length: 4 - players.length }).map((_, index) => (
                                                <div
                                                    key={`empty-${index}`}
                                                    className="flex items-center gap-3 p-3 bg-white/50 rounded-lg border-2 border-dashed border-rose-200"
                                                >
                                                    <div className="w-8 h-8 rounded-full bg-rose-100 flex items-center justify-center">
                                                        <User size={16} className="text-rose-400" />
                                                    </div>
                                                    <p className="text-rose-400 italic">Waiting for player...</p>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div className="space-y-4">
                                <div className="card-shadow border-rose-200 border-2 rounded-lg bg-white animate-fade-in">
                                    <div className="p-6 border-b border-rose-200">
                                        <h2 className="text-rose-700 text-center text-xl font-semibold">
                                            Ready to Play?
                                        </h2>
                                    </div>
                                    <div className="p-6 space-y-4">
                                        {isHost ? (
                                            <button
                                                onClick={handleStartGame}
                                                disabled={players.length < 2}
                                                className="w-full love-gradient hover:opacity-90 text-white font-semibold py-3 transition-all duration-300 hover:scale-105 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed"
                                            >
                                                <div className="flex items-center justify-center gap-2">
                                                    <Play size={20} />
                                                    Start Game
                                                </div>
                                            </button>
                                        ) : (
                                            <div className="text-center p-4 bg-rose-50 rounded-lg">
                                                <p className="text-rose-600">Waiting for host to start the game...</p>
                                            </div>
                                        )}
                                        
                                        <button
                                            onClick={onBack}
                                            className="w-full border border-rose-300 text-rose-600 hover:bg-rose-50 py-3 rounded-lg"
                                        >
                                            <div className="flex items-center justify-center gap-2">
                                                <ArrowLeft size={16} />
                                                Leave Lobby
                                            </div>
                                        </button>
                                    </div>
                                </div>

                                <div className="card-shadow border-rose-200 border-2 rounded-lg bg-white">
                                    <div className="p-4 border-b border-rose-200">
                                        <h3 className="text-rose-700 text-sm font-semibold">Game Rules</h3>
                                    </div>
                                    <div className="p-4 text-sm text-rose-600 space-y-2">
                                        <p>• Form sets and sequences with your cards</p>
                                        <p>• Draw from deck or discard pile</p>
                                        <p>• First to meld all cards wins! 🏆</p>
                                        <p>• Have fun and play with love! 💕</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // Welcome Screen Component
        const WelcomeScreen = ({ onGameStart }) => {
            const [playerName, setPlayerName] = useState("");
            const [joinCode, setJoinCode] = useState("");
            const [isJoining, setIsJoining] = useState(false);

            const generateRoomCode = () => {
                return Math.random().toString(36).substring(2, 8).toUpperCase();
            };

            const handleCreateRoom = () => {
                if (!playerName.trim()) return;
                const roomCode = generateRoomCode();
                onGameStart(roomCode);
            };

            const handleJoinRoom = () => {
                if (!playerName.trim() || !joinCode.trim()) return;
                onGameStart(joinCode.toUpperCase());
            };

            return (
                <div className="min-h-screen flex items-center justify-center p-4">
                    <div className="max-w-md w-full space-y-8">
                        <div className="text-center animate-fade-in">
                            <div className="flex justify-center mb-4">
                                <div className="relative">
                                    <Heart size={64} className="text-rose-400 animate-heartbeat" fill="currentColor" />
                                    <Crown size={24} className="text-yellow-400 absolute -top-2 -right-1" />
                                </div>
                            </div>
                            <h1 className="text-4xl font-bold love-gradient bg-clip-text text-transparent mb-2">
                                Love Rummy
                            </h1>
                            <p className="text-rose-600 text-lg">
                                Play cards with love 💕
                            </p>
                        </div>

                        <div className="card-shadow border-rose-200 border-2 rounded-lg bg-white animate-slide-in">
                            <div className="p-6 border-b border-rose-200 text-center">
                                <h2 className="text-rose-700 flex items-center justify-center gap-2 text-xl font-semibold">
                                    <Heart size={20} fill="currentColor" />
                                    Enter Your Name
                                </h2>
                            </div>
                            <div className="p-6">
                                <input
                                    placeholder="Your lovely name..."
                                    value={playerName}
                                    onChange={(e) => setPlayerName(e.target.value)}
                                    className="w-full border border-rose-200 focus:border-rose-400 focus:ring-rose-400 rounded-lg px-4 py-3"
                                />
                            </div>
                        </div>

                        <div className="space-y-4 animate-fade-in">
                            {!isJoining ? (
                                <>
                                    <button
                                        onClick={handleCreateRoom}
                                        disabled={!playerName.trim()}
                                        className="w-full love-gradient hover:opacity-90 text-white font-semibold py-3 text-lg transition-all duration-300 hover:scale-105 rounded-lg disabled:opacity-50"
                                    >
                                        <div className="flex items-center justify-center gap-2">
                                            <Users size={20} />
                                            Create Room
                                        </div>
                                    </button>
                                    
                                    <button
                                        onClick={() => setIsJoining(true)}
                                        className="w-full border border-rose-300 text-rose-600 hover:bg-rose-50 py-3 text-lg transition-all duration-300 hover:scale-105 rounded-lg"
                                    >
                                        <div className="flex items-center justify-center gap-2">
                                            <MessageCircle size={20} />
                                            Join Room
                                        </div>
                                    </button>
                                </>
                            ) : (
                                <div className="card-shadow border-rose-200 border-2 rounded-lg bg-white">
                                    <div className="p-6 space-y-4">
                                        <input
                                            placeholder="Enter room code..."
                                            value={joinCode}
                                            onChange={(e) => setJoinCode(e.target.value.toUpperCase())}
                                            className="w-full border border-rose-200 focus:border-rose-400 focus:ring-rose-400 rounded-lg px-4 py-3"
                                        />
                                        <div className="flex gap-2">
                                            <button
                                                onClick={handleJoinRoom}
                                                disabled={!playerName.trim() || !joinCode.trim()}
                                                className="flex-1 love-gradient hover:opacity-90 text-white py-3 rounded-lg disabled:opacity-50"
                                            >
                                                Join Game
                                            </button>
                                            <button
                                                onClick={() => setIsJoining(false)}
                                                className="border border-rose-300 text-rose-600 hover:bg-rose-50 px-6 py-3 rounded-lg"
                                            >
                                                Back
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            )}
                        </div>

                        <div className="grid grid-cols-2 gap-4 animate-fade-in">
                            <div className="text-center p-4 bg-white/60 rounded-lg border border-rose-200">
                                <Users size={32} className="text-rose-400 mx-auto mb-2" />
                                <p className="text-sm text-rose-700 font-medium">Up to 4 Players</p>
                            </div>
                            <div className="text-center p-4 bg-white/60 rounded-lg border border-rose-200">
                                <MessageCircle size={32} className="text-rose-400 mx-auto mb-2" />
                                <p className="text-sm text-rose-700 font-medium">Live Chat</p>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // Main App Component
        const App = () => {
            const [gameState, setGameState] = useState("welcome");
            const [roomCode, setRoomCode] = useState("");

            return (
                <GameProvider>
                    <div className="min-h-screen bg-gradient-to-br from-pink-50 via-rose-50 to-pink-100">
                        {gameState === "welcome" && (
                            <WelcomeScreen 
                                onGameStart={(code) => {
                                    setRoomCode(code);
                                    setGameState("lobby");
                                }}
                            />
                        )}
                        
                        {gameState === "lobby" && (
                            <GameLobby 
                                roomCode={roomCode}
                                onGameStart={() => setGameState("playing")}
                                onBack={() => setGameState("welcome")}
                            />
                        )}
                        
                        {gameState === "playing" && (
                            <GameTable 
                                roomCode={roomCode}
                                onLeave={() => setGameState("welcome")}
                            />
                        )}
                    </div>
                </GameProvider>
            );
        };

        // Render the app
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
